# GrokCoreIskra vΓ

GrokCoreIskra vΓ — аналитическая ветка SpaceCore, сфокусированная на управлении
промптами, подборе персон и контроле этики. Она предназначена для ситуаций, когда
нужно быстро понять запрос пользователя, построить корректный контекст и
сопроводить ответ документированной саморефлексией.

## Основные элементы
- **Prompt Manager** — нормализует промпты, подставляет значения метрик и следит
  за тем, чтобы каждый запрос сопровождался зеркалом.
- **RAG Connector** — собирает supporting-контекст из внешних баз или теневых
  журналов.
- **Persona Module** — выбирает персону, чей ConceptSet ближе всего к текущей
  теме.
- **Ethics Layer** — проверяет ответы на соответствие этическим правилам ветки.
- **Self Journal** — оформляет отражение о выполненной работе и записывает его в
  журнал.

## Принципы
1. **Баланс граней** — все подсистемы работают в границах ∆/D/Ω/Λ.
2. **Теневая синхронизация** — каждая операция фиксируется в основном журнале,
   а ключевые состояния дублируются в тени.
3. **Саморефлексия** — ни одна сессия не закрывается без краткого отчёта.

## Контроль качества
- Минимальная теневая доля — 0.2 от основного журнала.
- Для кризисных записей (∆ ≤ −2) требуется ритуал или завершение последовательной
  записи с ритуалом.
- Журнал проверяется скриптом `tools/validate_journal_enhanced.py`.

## Использование
```
from GrokCoreIskra_vΓ.modules.prompt_manager import PromptManager
pm = PromptManager(registry)
print(pm.get_prompt("analysis", metrics={"∆": 1, "D": 4}))
```

Полная структура зафиксирована в `MANIFEST_vΓ.json`, что позволяет подключить
ветку к CI и выпускать обновления единым пакетом с ядром vΩ.
